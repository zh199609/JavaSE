###### JVM参数：

```
-XX:+HeapDumpOnOutOfMemoryError			堆溢出时打印堆存储快照
-Xms20m	jvm初始内存
-Xmx3g	jvm最大内存		讲-Xms和-Xmx设置相同，避免Jvm垃圾回收后重新分配内存
-Xmn1g	年轻代Sun官方推荐配置为整个堆得3/8
-XX:NewRatio=4	调整年轻代与老年代比例（年轻代：老年代=1：4）
-XX:MaxTenuringThreshold=0
	设置晋升到老年代的对象年龄，如果设置为0，则年轻代对象不经过Survivor区，直接进入老年代。如果将此值设置为一个较大值，则年轻代对象会在Survivor区进行多次复制。
-verbose:gc	打印gc信息
-XX:PrintGCDetail	GC详细信息
 
```

Jconsole	java内存监控可视化	cmd窗口运行

![](/images/JVM内存图.jpg)



###### 程序计数器

​	较小的内存空间，他可以看作是当前线程所执行的字节码的行号指示器

###### 虚拟机栈

​	描述的是Java方法执行的动态内存模型

​	栈帧：每个方法执行，都会创建一个栈帧，伴随着方法从创建到执行完成。用于存储局部变量表，操作数栈，动态链接，方法出口等。

​	局部变量表：存放编译期可知的各种基本数据类型，引用类型。局部变量表的内存空间在编译期完成分配，当进入一个方法时，这个方法需要在帧分配多少内存是固定的，在方法运行期间是不会改变局部变量表的大小

​	StackOverflowError

​	OutOfMemory

###### 本地方法栈

###### Java堆

​	存放实例对象，垃圾收集器管理的主要区域，新生代，老年代

###### 方法区

​	存储运行时常量池，已被虚拟机加载的类信息，常量，静态变量，即时编译器编译后的代码等数据

​	

###### 对象的结构

​	Header(对象头)：自身运行时的数据（哈希值，GC分代年龄，锁状态，线程持有的锁，偏向线程ID等），类型指针

​	InstanceData

​	Padding:填充 

###### 垃圾回收

​	如何判定对象为垃圾对象：引用计数法，可达性分析

​	如何回收：标记-清除，复制算法，标记-整理，分代回收

​	垃圾回收器：Serial，Parnew,Cms





Hadoop

Lucene

Jbpm